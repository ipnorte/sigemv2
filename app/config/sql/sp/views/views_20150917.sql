DROP VIEW IF EXISTS `v_asincronos`;
DROP VIEW IF EXISTS `v_bancos`;
DROP VIEW IF EXISTS `v_cancelacion_ordenes`;
DROP VIEW IF EXISTS `v_cliente_calificaciones`;
DROP VIEW IF EXISTS `v_cliente_cancelaciones_emitidas`;
DROP VIEW IF EXISTS `v_clientes`;
DROP VIEW IF EXISTS `v_credito_solcitud_cancelaciones`;
DROP VIEW IF EXISTS `v_credito_solicitud_cuotas_ws`;
DROP VIEW IF EXISTS `v_credito_solicitud_documentos`;
DROP VIEW IF EXISTS `v_credito_solicitudes`;
DROP VIEW IF EXISTS `v_credito_solicitud_estados`;
DROP VIEW IF EXISTS `v_credito_solicitudes_ws`;
DROP VIEW IF EXISTS `v_credito_solicitud_forma_liquidacion`;
DROP VIEW IF EXISTS `v_credito_solicitud_instruccion_pagos`;
DROP VIEW IF EXISTS `v_credito_solitud_historicos`;
DROP VIEW IF EXISTS `v_empresas`;
DROP VIEW IF EXISTS `v_estado_cuenta`;
DROP VIEW IF EXISTS `v_global_datos`;
DROP VIEW IF EXISTS `v_grupos`;
DROP VIEW IF EXISTS `view_socios`;
DROP VIEW IF EXISTS `v_localidades`;
DROP VIEW IF EXISTS `v_organismos`;
DROP VIEW IF EXISTS `v_persona_beneficios`;
DROP VIEW IF EXISTS `v_persona_domicilios`;
DROP VIEW IF EXISTS `v_persona_estados_civil`;
DROP VIEW IF EXISTS `v_personas`;
DROP VIEW IF EXISTS `v_persona_tipo_documentos`;
DROP VIEW IF EXISTS `v_plan_condiciones`;
DROP VIEW IF EXISTS `v_planes`;
DROP VIEW IF EXISTS `v_plan_monto_cuotas`;
DROP VIEW IF EXISTS `v_plan_montos`;
DROP VIEW IF EXISTS `v_plan_organismos`;
DROP VIEW IF EXISTS `v_productos`;
DROP VIEW IF EXISTS `v_proveedores`;
DROP VIEW IF EXISTS `v_provincias`;
DROP VIEW IF EXISTS `v_usuario_grupos_activos`;
DROP VIEW IF EXISTS `v_usuarios`;
DROP VIEW IF EXISTS `v_usuarios_grupos_realm`;
DROP VIEW IF EXISTS `v_vendedores`;
DROP VIEW IF EXISTS `v_vendedor_remitos`;


CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_asincronos` AS (select `asincronos`.`id` AS `ID`,`asincronos`.`shell_pid` AS `SHELL_PID`,`asincronos`.`propietario` AS `PROPIETARIO`,`asincronos`.`remote_ip` AS `REMOTE_IP`,`asincronos`.`final` AS `FINAL`,`asincronos`.`proceso` AS `PROCESO`,`asincronos`.`bloqueado` AS `BLOQUEADO`,`asincronos`.`p1` AS `P1`,`asincronos`.`p2` AS `P2`,`asincronos`.`p3` AS `P3`,`asincronos`.`p4` AS `P4`,`asincronos`.`p5` AS `P5`,`asincronos`.`p6` AS `P6`,`asincronos`.`p7` AS `P7`,`asincronos`.`p8` AS `P8`,`asincronos`.`p9` AS `P9`,`asincronos`.`p10` AS `P10`,`asincronos`.`p11` AS `P11`,`asincronos`.`p12` AS `P12`,`asincronos`.`p13` AS `P13`,`asincronos`.`txt1` AS `TXT1`,`asincronos`.`txt2` AS `TXT2`,`asincronos`.`action_do` AS `ACTION_DO`,`asincronos`.`target` AS `TARGET`,`asincronos`.`btn_label` AS `BTN_LABEL`,`asincronos`.`titulo` AS `TITULO`,`asincronos`.`subtitulo` AS `SUB_TITULO`,`asincronos`.`estado` AS `ESTADO`,`asincronos`.`total` AS `TOTAL`,`asincronos`.`contador` AS `CONTADOR`,`asincronos`.`porcentaje` AS `PORCENTAJE`,`asincronos`.`msg` AS `MSG`,`asincronos`.`errores` AS `ERRORES`,`asincronos`.`created` AS `CREATED`,`asincronos`.`modified` AS `MODIFIED` from `asincronos`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_bancos` AS (select `bancos`.`id` AS `ID`,`bancos`.`nombre` AS `NOMBRE`,`bancos`.`activo` AS `ACTIVO`,`bancos`.`beneficio` AS `BENEFICIO` from `bancos`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_cancelacion_ordenes` AS (select `cancelacion_ordenes`.`id` AS `ID`,`cancelacion_ordenes`.`estado` AS `ESTADO`,if((`cancelacion_ordenes`.`estado` = 'E'),'EMITIDA','PROCESADA') AS `ESTADO_DESC`,`cancelacion_ordenes`.`socio_id` AS `CLIENTE_ID`,`cancelacion_ordenes`.`importe_proveedor` AS `IMPORTE_CANCELA`,`cancelacion_ordenes`.`importe_seleccionado` AS `IMPORTE_SELECCIONADO`,`cancelacion_ordenes`.`saldo_orden_dto` AS `SALDO_ORDEN`,`cancelacion_ordenes`.`importe_cuota` AS `IMPORTE_CUOTA`,`cancelacion_ordenes`.`importe_diferencia` AS `DEBITO_CREDITO`,((`cancelacion_ordenes`.`saldo_orden_dto` - `cancelacion_ordenes`.`importe_proveedor`) + `cancelacion_ordenes`.`importe_diferencia`) AS `SALDO`,`cancelacion_ordenes`.`fecha_vto` AS `VENCIMIENTO`,if((`cancelacion_ordenes`.`tipo_cancelacion` = 'T'),'TOTAL','PARCIAL') AS `TIPO`,`cancelacion_ordenes`.`observaciones` AS `OBSERVACIONES`,`cancelacion_ordenes`.`concepto` AS `CONCEPTO`,(select count(0) from `cancelacion_orden_cuotas` where (`cancelacion_orden_cuotas`.`cancelacion_orden_id` = `cancelacion_ordenes`.`id`)) AS `CANTIDAD_CUOTAS`,`proveedores`.`id` AS `PROVEEDOR_ID`,ucase(`proveedores`.`razon_social`) AS `A_LA_ORDEN_DE`,`mutual_producto_solicitudes`.`id` AS `SOLICITUD_CREDITO_ID` from (((`cancelacion_ordenes` join `proveedores` on((`proveedores`.`id` = `cancelacion_ordenes`.`orden_proveedor_id`))) left join `orden_descuentos` on((`orden_descuentos`.`id` = `cancelacion_ordenes`.`orden_descuento_id`))) left join `mutual_producto_solicitudes` on(((`mutual_producto_solicitudes`.`id` = `orden_descuentos`.`numero`) and (`mutual_producto_solicitudes`.`tipo_orden_dto` = `orden_descuentos`.`tipo_orden_dto`)))));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_global_datos` AS (select `global_datos`.`id` AS `ID`,`global_datos`.`concepto_1` AS `CONCEPTO_1`,`global_datos`.`concepto_2` AS `CONCEPTO_2`,`global_datos`.`concepto_3` AS `CONCEPTO_3`,`global_datos`.`logico_1` AS `LOGICO_1`,`global_datos`.`logico_2` AS `LOGICO_2`,`global_datos`.`entero_1` AS `ENTERO_1`,`global_datos`.`entero_2` AS `ENTERO_2`,`global_datos`.`decimal_1` AS `DECIMAL_1`,`global_datos`.`decimal_2` AS `DECIMAL_2`,`global_datos`.`fecha_1` AS `FECHA_1`,`global_datos`.`fecha_2` AS `FECHA_2`,`global_datos`.`texto_1` AS `TEXTO_1`,`global_datos`.`texto_2` AS `TEXTO_2` from `global_datos`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_clientes` AS (select `socios`.`id` AS `ID`,`socios`.`categoria` AS `CATEGORIA`,`socios`.`persona_id` AS `PERSONA_ID`,`socios`.`persona_beneficio_id` AS `BENEFICIO_ID`,`socios`.`activo` AS `ACTIVO`,`socios`.`fecha_alta` AS `FECHA_ALTA`,`socios`.`orden_descuento_id` AS `ORDEN_DESCUENTO_ID`,`socios`.`calificacion` AS `CALIFICACION`,`socios`.`fecha_calificacion` AS `FECHA_CALIFICACION`,`socios`.`codigo_baja` AS `CODIGO_BAJA`,`socios`.`fecha_baja` AS `FECHA_BAJA`,`socios`.`observaciones` AS `OBSERVACIONES` from `socios`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_cliente_calificaciones` AS (select `v_global_datos`.`ID` AS `ID`,`v_global_datos`.`CONCEPTO_1` AS `CONCEPTO_1`,`v_global_datos`.`CONCEPTO_2` AS `CONCEPTO_2`,`v_global_datos`.`CONCEPTO_3` AS `CONCEPTO_3`,`v_global_datos`.`LOGICO_1` AS `LOGICO_1`,`v_global_datos`.`LOGICO_2` AS `LOGICO_2`,`v_global_datos`.`ENTERO_1` AS `ENTERO_1`,`v_global_datos`.`ENTERO_2` AS `ENTERO_2`,`v_global_datos`.`DECIMAL_1` AS `DECIMAL_1`,`v_global_datos`.`DECIMAL_2` AS `DECIMAL_2`,`v_global_datos`.`FECHA_1` AS `FECHA_1`,`v_global_datos`.`FECHA_2` AS `FECHA_2`,`v_global_datos`.`TEXTO_1` AS `TEXTO_1`,`v_global_datos`.`TEXTO_2` AS `TEXTO_2` from `v_global_datos` where ((`v_global_datos`.`ID` like 'MUTUCALI%') and (`v_global_datos`.`ID` <> 'MUTUCALI')) order by `v_global_datos`.`ENTERO_1`,`v_global_datos`.`CONCEPTO_1`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_credito_solicitudes` AS (select `mutual_producto_solicitudes`.`id` AS `ID`,`mutual_producto_solicitudes`.`proveedor_id` AS `PROVEEDOR_ID`,`mutual_producto_solicitudes`.`proveedor_plan_id` AS `PROVEEDOR_PLAN_ID`,`mutual_producto_solicitudes`.`persona_id` AS `PERSONA_ID`,`mutual_producto_solicitudes`.`socio_id` AS `CLIENTE_ID`,`mutual_producto_solicitudes`.`persona_beneficio_id` AS `PERSONA_BENEFICIO_ID`,`mutual_producto_solicitudes`.`aprobada` AS `APROBADA`,`mutual_producto_solicitudes`.`anulada` AS `ANULADA`,`mutual_producto_solicitudes`.`fecha` AS `FECHA`,`mutual_producto_solicitudes`.`fecha_pago` AS `FECHA_PAGO`,`mutual_producto_solicitudes`.`tipo_orden_dto` AS `TIPO_ORDEN_DTO`,`mutual_producto_solicitudes`.`tipo_producto` AS `TIPO_PRODUCTO`,if(((`mutual_producto_solicitudes`.`anulada` = 1) and (`mutual_producto_solicitudes`.`estado` = 'MUTUESTA0001')),'MUTUESTA0000',`mutual_producto_solicitudes`.`estado`) AS `ESTADO`,`mutual_producto_solicitudes`.`importe_total` AS `IMPORTE_TOTAL`,`mutual_producto_solicitudes`.`cuotas` AS `CUOTAS`,`mutual_producto_solicitudes`.`importe_cuota` AS `IMPORTE_CUOTA`,`mutual_producto_solicitudes`.`importe_solicitado` AS `IMPORTE_SOLICITADO`,`mutual_producto_solicitudes`.`importe_percibido` AS `IMPORTE_PERCIBIDO`,`mutual_producto_solicitudes`.`observaciones` AS `OBSERVACIONES`,`mutual_producto_solicitudes`.`orden_descuento_id` AS `ORDEN_DESCUENTO_ID`,`mutual_producto_solicitudes`.`aprobada_por` AS `APROBADA_POR`,`mutual_producto_solicitudes`.`aprobada_el` AS `APROBADA_EL`,`mutual_producto_solicitudes`.`vendedor_id` AS `VENDEDOR_ID`,`mutual_producto_solicitudes`.`vendedor_remito_id` AS `VENDEDOR_REMITO_ID`,`mutual_producto_solicitudes`.`vendedor_notificar` AS `VENDEDOR_NOTIFICAR`,`mutual_producto_solicitudes`.`user_created` AS `EMITIDA_POR`,`mutual_producto_solicitudes`.`periodo_ini` AS `PERIODO_INI`,`mutual_producto_solicitudes`.`primer_vto_socio` AS `PRIMER_VTO_SOCIO`,`mutual_producto_solicitudes`.`forma_pago` AS `FORMA_PAGO`,if(((`mutual_producto_solicitudes`.`aprobada` = 1) and (`mutual_producto_solicitudes`.`anulada` = 0)),concat(`mutual_producto_solicitudes`.`tipo_orden_dto`,' ',`mutual_producto_solicitudes`.`orden_descuento_id`),'') AS `ORDEN_DESCUENTO` from `mutual_producto_solicitudes` where (`mutual_producto_solicitudes`.`tipo_orden_dto` = 'EXPTE'));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_credito_solcitud_cancelaciones` AS (select `mutual_producto_solicitud_cancelaciones`.`mutual_producto_solicitud_id` AS `MUTUAL_PRODUCTO_SOLICITUD_ID`,`mutual_producto_solicitud_cancelaciones`.`cancelacion_orden_id` AS `CANCELACION_ORDEN_ID` from `mutual_producto_solicitud_cancelaciones`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_credito_solicitud_documentos` AS (select `mutual_producto_solicitud_documentos`.`id` AS `ID`,`mutual_producto_solicitud_documentos`.`mutual_producto_solicitud_id` AS `MUTUAL_PRODUCTO_SOLICITUD_ID`,`mutual_producto_solicitud_documentos`.`file_name` AS `FILE_NAME`,`mutual_producto_solicitud_documentos`.`file_type` AS `FILE_TYPE`,`mutual_producto_solicitud_documentos`.`file_data` AS `FILE_DATA` from `mutual_producto_solicitud_documentos`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_credito_solicitud_estados` AS (select `v_global_datos`.`ID` AS `ID`,`v_global_datos`.`CONCEPTO_1` AS `CONCEPTO_1`,`v_global_datos`.`CONCEPTO_2` AS `CONCEPTO_2`,`v_global_datos`.`CONCEPTO_3` AS `CONCEPTO_3`,`v_global_datos`.`LOGICO_1` AS `LOGICO_1`,`v_global_datos`.`LOGICO_2` AS `LOGICO_2`,`v_global_datos`.`ENTERO_1` AS `ENTERO_1`,`v_global_datos`.`ENTERO_2` AS `ENTERO_2`,`v_global_datos`.`DECIMAL_1` AS `DECIMAL_1`,`v_global_datos`.`DECIMAL_2` AS `DECIMAL_2`,`v_global_datos`.`FECHA_1` AS `FECHA_1`,`v_global_datos`.`FECHA_2` AS `FECHA_2`,`v_global_datos`.`TEXTO_1` AS `TEXTO_1`,`v_global_datos`.`TEXTO_2` AS `TEXTO_2` from `v_global_datos` where ((`v_global_datos`.`ID` like 'MUTUESTA%') and (`v_global_datos`.`ID` <> 'MUTUESTA')) order by `v_global_datos`.`ENTERO_1`,`v_global_datos`.`CONCEPTO_1`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_credito_solicitud_forma_liquidacion` AS (select `v_global_datos`.`ID` AS `ID`,`v_global_datos`.`CONCEPTO_1` AS `CONCEPTO_1`,`v_global_datos`.`CONCEPTO_2` AS `CONCEPTO_2`,`v_global_datos`.`CONCEPTO_3` AS `CONCEPTO_3`,`v_global_datos`.`LOGICO_1` AS `LOGICO_1`,`v_global_datos`.`LOGICO_2` AS `LOGICO_2`,`v_global_datos`.`ENTERO_1` AS `ENTERO_1`,`v_global_datos`.`ENTERO_2` AS `ENTERO_2`,`v_global_datos`.`DECIMAL_1` AS `DECIMAL_1`,`v_global_datos`.`DECIMAL_2` AS `DECIMAL_2`,`v_global_datos`.`FECHA_1` AS `FECHA_1`,`v_global_datos`.`FECHA_2` AS `FECHA_2`,`v_global_datos`.`TEXTO_1` AS `TEXTO_1`,`v_global_datos`.`TEXTO_2` AS `TEXTO_2` from `v_global_datos` where ((`v_global_datos`.`ID` like 'MUTUFPAG%') and (`v_global_datos`.`ID` <> 'MUTUFPAG')) order by `v_global_datos`.`CONCEPTO_1`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_credito_solicitud_instruccion_pagos` AS (select `mutual_producto_solicitud_instruccion_pagos`.`id` AS `ID`,`mutual_producto_solicitud_instruccion_pagos`.`mutual_producto_solicitud_id` AS `MUTUAL_PRODUCTO_SOLICITUD_ID`,`mutual_producto_solicitud_instruccion_pagos`.`a_la_orden_de` AS `A_LA_ORDEN_DE`,`mutual_producto_solicitud_instruccion_pagos`.`concepto` AS `CONCEPTO`,`mutual_producto_solicitud_instruccion_pagos`.`importe` AS `IMPORTE` from `mutual_producto_solicitud_instruccion_pagos`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_credito_solitud_historicos` AS select `h`.`id` AS `ID`,`h`.`created` AS `FECHA_NOVEDAD`,`h`.`user_created` AS `USUARIO`,`h`.`mutual_producto_solicitud_id` AS `MUTUAL_PRODUCTO_SOLICITUD_ID`,`g`.`concepto_1` AS `ESTADO`,`h`.`observaciones` AS `OBSERVACIONES` from (`mutual_producto_solicitud_estados` `h` join `global_datos` `g` on((`g`.`id` = convert(`h`.`estado` using utf8))));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_cliente_cancelaciones_emitidas` AS (select `v_clientes`.`ID` AS `CLIENTE_ID`,`v_cancelacion_ordenes`.`ID` AS `CANCELACION_ID` from (`v_clientes` join `v_cancelacion_ordenes` on((`v_cancelacion_ordenes`.`CLIENTE_ID` = `v_clientes`.`ID`))) where ((`v_cancelacion_ordenes`.`ESTADO` = 'E') and (`v_cancelacion_ordenes`.`VENCIMIENTO` >= curdate()) and (not(`v_cancelacion_ordenes`.`ID` in (select `v_credito_solcitud_cancelaciones`.`CANCELACION_ORDEN_ID` from `v_credito_solcitud_cancelaciones`)))));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_empresas` AS (select `v_global_datos`.`ID` AS `ID`,`v_global_datos`.`CONCEPTO_1` AS `CONCEPTO_1`,`v_global_datos`.`CONCEPTO_2` AS `CONCEPTO_2`,`v_global_datos`.`CONCEPTO_3` AS `CONCEPTO_3`,`v_global_datos`.`LOGICO_1` AS `LOGICO_1`,`v_global_datos`.`LOGICO_2` AS `LOGICO_2`,`v_global_datos`.`ENTERO_1` AS `ENTERO_1`,`v_global_datos`.`ENTERO_2` AS `ENTERO_2`,`v_global_datos`.`DECIMAL_1` AS `DECIMAL_1`,`v_global_datos`.`DECIMAL_2` AS `DECIMAL_2`,`v_global_datos`.`FECHA_1` AS `FECHA_1`,`v_global_datos`.`FECHA_2` AS `FECHA_2`,`v_global_datos`.`TEXTO_1` AS `TEXTO_1`,`v_global_datos`.`TEXTO_2` AS `TEXTO_2` from `v_global_datos` where ((`v_global_datos`.`ID` like 'MUTUEMPR%') and (`v_global_datos`.`ID` <> 'MUTUEMPR')) order by `v_global_datos`.`ENTERO_1`,`v_global_datos`.`CONCEPTO_1`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_estado_cuenta` AS select `orden_descuento_cuotas`.`id` AS `ID`,`orden_descuento_cuotas`.`socio_id` AS `SOCIO_ID`,'VENCIDO' AS `TIPO`,`orden_descuento_cuotas`.`orden_descuento_id` AS `ORDEN_DESCUENTO_ID`,concat(`orden_descuentos`.`tipo_orden_dto`,' #',`orden_descuentos`.`numero`) AS `TIPO_NUMERO`,`tipo_cuota`.`concepto_1` AS `CONCEPTO`,`orden_descuento_cuotas`.`periodo` AS `PERIODO`,concat(substr(`orden_descuento_cuotas`.`periodo`,5,2),'/',substr(`orden_descuento_cuotas`.`periodo`,1,4)) AS `PERIODO_STR`,concat(lpad(`orden_descuento_cuotas`.`nro_cuota`,2,'0'),'/',lpad(`orden_descuentos`.`cuotas`,2,'0')) AS `CUOTA`,`orden_descuento_cuotas`.`importe` AS `IMPORTE_ORIGINAL`,ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0) AS `PAGOS`,(`orden_descuento_cuotas`.`importe` - ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0)) AS `SALDO_CONCILIADO`,ifnull((select sum(`liquidacion_cuotas`.`importe_debitado`) from `liquidacion_cuotas` where ((`liquidacion_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`) and (`liquidacion_cuotas`.`imputada` = 0) and (`liquidacion_cuotas`.`para_imputar` = 1))),0) AS `PENDIENTE_ACREDITAR`,((`orden_descuento_cuotas`.`importe` - ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0)) - ifnull((select sum(`liquidacion_cuotas`.`importe_debitado`) from `liquidacion_cuotas` where ((`liquidacion_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`) and (`liquidacion_cuotas`.`imputada` = 0) and (`liquidacion_cuotas`.`para_imputar` = 1))),0)) AS `SALDO` from ((`orden_descuento_cuotas` join `orden_descuentos` on((`orden_descuentos`.`id` = `orden_descuento_cuotas`.`orden_descuento_id`))) join `global_datos` `tipo_cuota` on((`tipo_cuota`.`id` = `orden_descuento_cuotas`.`tipo_cuota`))) where ((`orden_descuento_cuotas`.`importe` > ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0)) and (`orden_descuento_cuotas`.`periodo` < date_format(now(),'%Y%m')) and (`orden_descuento_cuotas`.`estado` <> 'B')) union select `orden_descuento_cuotas`.`id` AS `ID`,`orden_descuento_cuotas`.`socio_id` AS `SOCIO_ID`,'CORRIENTE' AS `TIPO`,`orden_descuento_cuotas`.`orden_descuento_id` AS `ORDEN_DESCUENTO_ID`,concat(`orden_descuentos`.`tipo_orden_dto`,' #',`orden_descuentos`.`numero`) AS `TIPO_NUMERO`,`tipo_cuota`.`concepto_1` AS `CONCEPTO`,`orden_descuento_cuotas`.`periodo` AS `PERIODO`,concat(substr(`orden_descuento_cuotas`.`periodo`,5,2),'/',substr(`orden_descuento_cuotas`.`periodo`,1,4)) AS `PERIODO_STR`,concat(lpad(`orden_descuento_cuotas`.`nro_cuota`,2,'0'),'/',lpad(`orden_descuentos`.`cuotas`,2,'0')) AS `CUOTA`,`orden_descuento_cuotas`.`importe` AS `IMPORTE_ORIGINAL`,ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0) AS `PAGOS`,(`orden_descuento_cuotas`.`importe` - ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0)) AS `SALDO_CONCILIADO`,ifnull((select sum(`liquidacion_cuotas`.`importe_debitado`) from `liquidacion_cuotas` where ((`liquidacion_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`) and (`liquidacion_cuotas`.`imputada` = 0) and (`liquidacion_cuotas`.`para_imputar` = 1))),0) AS `PENDIENTE_ACREDITAR`,((`orden_descuento_cuotas`.`importe` - ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0)) - ifnull((select sum(`liquidacion_cuotas`.`importe_debitado`) from `liquidacion_cuotas` where ((`liquidacion_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`) and (`liquidacion_cuotas`.`imputada` = 0) and (`liquidacion_cuotas`.`para_imputar` = 1))),0)) AS `SALDO` from ((`orden_descuento_cuotas` join `orden_descuentos` on((`orden_descuentos`.`id` = `orden_descuento_cuotas`.`orden_descuento_id`))) join `global_datos` `tipo_cuota` on((`tipo_cuota`.`id` = `orden_descuento_cuotas`.`tipo_cuota`))) where ((`orden_descuento_cuotas`.`importe` > ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0)) and (`orden_descuento_cuotas`.`periodo` = date_format(now(),'%Y%m')) and (`orden_descuento_cuotas`.`estado` <> 'B')) union select `orden_descuento_cuotas`.`id` AS `ID`,`orden_descuento_cuotas`.`socio_id` AS `SOCIO_ID`,'A_VENCER' AS `TIPO`,`orden_descuento_cuotas`.`orden_descuento_id` AS `ORDEN_DESCUENTO_ID`,concat(`orden_descuentos`.`tipo_orden_dto`,' #',`orden_descuentos`.`numero`) AS `TIPO_NUMERO`,`tipo_cuota`.`concepto_1` AS `CONCEPTO`,`orden_descuento_cuotas`.`periodo` AS `PERIODO`,concat(substr(`orden_descuento_cuotas`.`periodo`,5,2),'/',substr(`orden_descuento_cuotas`.`periodo`,1,4)) AS `PERIODO_STR`,concat(lpad(`orden_descuento_cuotas`.`nro_cuota`,2,'0'),'/',lpad(`orden_descuentos`.`cuotas`,2,'0')) AS `CUOTA`,`orden_descuento_cuotas`.`importe` AS `IMPORTE_ORIGINAL`,ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0) AS `PAGOS`,(`orden_descuento_cuotas`.`importe` - ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0)) AS `SALDO_CONCILIADO`,ifnull((select sum(`liquidacion_cuotas`.`importe_debitado`) from `liquidacion_cuotas` where ((`liquidacion_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`) and (`liquidacion_cuotas`.`imputada` = 0) and (`liquidacion_cuotas`.`para_imputar` = 1))),0) AS `PENDIENTE_ACREDITAR`,((`orden_descuento_cuotas`.`importe` - ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0)) - ifnull((select sum(`liquidacion_cuotas`.`importe_debitado`) from `liquidacion_cuotas` where ((`liquidacion_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`) and (`liquidacion_cuotas`.`imputada` = 0) and (`liquidacion_cuotas`.`para_imputar` = 1))),0)) AS `SALDO` from ((`orden_descuento_cuotas` join `orden_descuentos` on((`orden_descuentos`.`id` = `orden_descuento_cuotas`.`orden_descuento_id`))) join `global_datos` `tipo_cuota` on((`tipo_cuota`.`id` = `orden_descuento_cuotas`.`tipo_cuota`))) where ((`orden_descuento_cuotas`.`importe` > ifnull((select sum(`orden_descuento_cobro_cuotas`.`importe`) from `orden_descuento_cobro_cuotas` where (`orden_descuento_cobro_cuotas`.`orden_descuento_cuota_id` = `orden_descuento_cuotas`.`id`)),0)) and (`orden_descuento_cuotas`.`periodo` > date_format(now(),'%Y%m')) and (`orden_descuento_cuotas`.`estado` <> 'B')) order by `PERIODO`,`ID`,`CUOTA`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_grupos` AS (select `grupos`.`id` AS `ID`,`grupos`.`nombre` AS `NOMBRE`,`grupos`.`activo` AS `ACTIVO` from `grupos`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `view_socios` AS select `Socio`.`id` AS `socio_id` from ((`socios` `Socio` join `orden_descuentos` `OrdenDescuento` on((`OrdenDescuento`.`socio_id` = `Socio`.`id`))) join `persona_beneficios` `PersonaBeneficio` on((`PersonaBeneficio`.`id` = `OrdenDescuento`.`persona_beneficio_id`))) where (`PersonaBeneficio`.`codigo_beneficio` = 'MUTUCORG2202') group by `Socio`.`id` limit 10;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_localidades` AS (select `localidades`.`id` AS `ID`,`localidades`.`cp` AS `CP`,`localidades`.`nombre` AS `NOMBRE`,`localidades`.`provincia_id` AS `PROVINCIA_ID`,`localidades`.`letra_provincia` AS `LETRA_PROVINCIA` from `localidades` where (`localidades`.`provincia_id` is not null));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_organismos` AS (select `v_global_datos`.`ID` AS `ID`,`v_global_datos`.`CONCEPTO_1` AS `CONCEPTO_1`,`v_global_datos`.`CONCEPTO_2` AS `CONCEPTO_2`,`v_global_datos`.`CONCEPTO_3` AS `CONCEPTO_3`,`v_global_datos`.`LOGICO_1` AS `LOGICO_1`,`v_global_datos`.`LOGICO_2` AS `LOGICO_2`,`v_global_datos`.`ENTERO_1` AS `ENTERO_1`,`v_global_datos`.`ENTERO_2` AS `ENTERO_2`,`v_global_datos`.`DECIMAL_1` AS `DECIMAL_1`,`v_global_datos`.`DECIMAL_2` AS `DECIMAL_2`,`v_global_datos`.`FECHA_1` AS `FECHA_1`,`v_global_datos`.`FECHA_2` AS `FECHA_2`,`v_global_datos`.`TEXTO_1` AS `TEXTO_1`,`v_global_datos`.`TEXTO_2` AS `TEXTO_2` from `v_global_datos` where ((`v_global_datos`.`ID` like 'MUTUCORG%') and (`v_global_datos`.`ID` <> 'MUTUCORG')) order by `v_global_datos`.`CONCEPTO_1`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_persona_beneficios` AS (select `persona_beneficios`.`id` AS `ID`,`persona_beneficios`.`persona_id` AS `PERSONA_ID`,`persona_beneficios`.`codigo_beneficio` AS `CODIGO_ORGANISMO`,`persona_beneficios`.`nro_ley` AS `NRO_LEY`,`persona_beneficios`.`tipo` AS `TIPO`,`persona_beneficios`.`nro_beneficio` AS `NRO_BENEFICIO`,`persona_beneficios`.`sub_beneficio` AS `SUB_BENEFICIO`,`persona_beneficios`.`nro_legajo` AS `NRO_LEGAJO`,`persona_beneficios`.`fecha_ingreso` AS `FECHA_INGRESO`,`persona_beneficios`.`codigo_reparticion` AS `CODIGO_REPARTICION`,`persona_beneficios`.`turno_pago` AS `TURNO_PAGO`,`persona_beneficios`.`cbu` AS `CBU`,`persona_beneficios`.`banco_id` AS `BANCO_ID`,`persona_beneficios`.`nro_sucursal` AS `NRO_SUCURSAL`,`persona_beneficios`.`tipo_cta_bco` AS `TIPO_CTA_BCO`,`persona_beneficios`.`nro_cta_bco` AS `NRO_CTA_BANCO`,`persona_beneficios`.`codigo_empresa` AS `CODIGO_EMPRESA`,`persona_beneficios`.`principal` AS `PRINCIPAL`,`persona_beneficios`.`activo` AS `ACTIVO`,`persona_beneficios`.`porcentaje` AS `PORCENTAJE`,`persona_beneficios`.`acuerdo_debito` AS `ACUERDO_DEBITO`,`persona_beneficios`.`importe_max_registro_cbu` AS `IMPORTE_MAX_REGISTRO_CBU`,concat(`gl1`.`concepto_1`,' - ',`gl2`.`concepto_1`,' | ',if((`persona_beneficios`.`codigo_empresa` = 'MUTUEMPRP001'),`persona_beneficios`.`turno_pago`,''),' | CBU: ',`persona_beneficios`.`cbu`) AS `CADENA` from ((`persona_beneficios` join `global_datos` `gl1` on((`gl1`.`id` = `persona_beneficios`.`codigo_beneficio`))) join `global_datos` `gl2` on((`gl2`.`id` = `persona_beneficios`.`codigo_empresa`))) where (`persona_beneficios`.`activo` = 1));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_persona_domicilios` AS (select `personas`.`id` AS `ID`,`personas`.`calle` AS `CALLE`,`personas`.`numero_calle` AS `NUMERO_CALLE`,`personas`.`piso` AS `PISO`,`personas`.`dpto` AS `DPTO`,`personas`.`barrio` AS `BARRIO`,`personas`.`localidad_id` AS `LOCALIDAD_ID`,`personas`.`localidad` AS `LOCALIDAD_DESC`,`personas`.`codigo_postal` AS `CODIGO_POSTAL`,`personas`.`provincia_id` AS `PROVINCIA_ID` from `personas`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_persona_estados_civil` AS (select `v_global_datos`.`ID` AS `ID`,`v_global_datos`.`CONCEPTO_1` AS `CONCEPTO_1`,`v_global_datos`.`CONCEPTO_2` AS `CONCEPTO_2`,`v_global_datos`.`CONCEPTO_3` AS `CONCEPTO_3`,`v_global_datos`.`LOGICO_1` AS `LOGICO_1`,`v_global_datos`.`LOGICO_2` AS `LOGICO_2`,`v_global_datos`.`ENTERO_1` AS `ENTERO_1`,`v_global_datos`.`ENTERO_2` AS `ENTERO_2`,`v_global_datos`.`DECIMAL_1` AS `DECIMAL_1`,`v_global_datos`.`DECIMAL_2` AS `DECIMAL_2`,`v_global_datos`.`FECHA_1` AS `FECHA_1`,`v_global_datos`.`FECHA_2` AS `FECHA_2`,`v_global_datos`.`TEXTO_1` AS `TEXTO_1`,`v_global_datos`.`TEXTO_2` AS `TEXTO_2` from `v_global_datos` where ((`v_global_datos`.`ID` like 'PERSXXEC%') and (`v_global_datos`.`ID` <> 'PERSXXEC')));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_personas` AS (select `personas`.`id` AS `ID`,`personas`.`id` AS `DOMICILIO_ID`,`personas`.`tipo_documento` AS `TIPO_DOCUMENTO`,`personas`.`documento` AS `DOCUMENTO`,`personas`.`apellido` AS `APELLIDO`,`personas`.`nombre` AS `NOMBRE`,`personas`.`fecha_nacimiento` AS `FECHA_NACIMIENTO`,`personas`.`fecha_fallecimiento` AS `FECHA_FALLECIMIENTO`,`personas`.`fallecida` AS `FALLECIDA`,`personas`.`sexo` AS `SEXO`,`personas`.`estado_civil` AS `ESTADO_CIVIL`,`personas`.`calle` AS `CALLE`,`personas`.`numero_calle` AS `NUMERO_CALLE`,`personas`.`piso` AS `PISO`,`personas`.`dpto` AS `DPTO`,`personas`.`barrio` AS `BARRIO`,`personas`.`localidad_id` AS `LOCALIDAD_ID`,`personas`.`localidad` AS `LOCALIDAD_DESC`,`personas`.`codigo_postal` AS `CODIGO_POSTAL`,`personas`.`provincia_id` AS `PROVINCIA_ID`,`personas`.`cuit_cuil` AS `CUIT_CUIL`,`personas`.`nombre_conyuge` AS `NOMBRE_CONYUGE`,`personas`.`telefono_fijo` AS `TELEFONO_FIJO`,`personas`.`telefono_movil` AS `TELEFONO_MOVIL`,`personas`.`telefono_referencia` AS `TELEFONO_REFERENCIA`,`personas`.`persona_referencia` AS `PERSONA_REFERENCIA`,`personas`.`e_mail` AS `E_MAIL`,`personas`.`tipo_vivienda` AS `TIPO_VIVIENDA`,`personas`.`filial` AS `FILIAL`,`personas`.`user_created` AS `USER_CREATED`,`personas`.`user_modified` AS `USER_MODIFIED`,`personas`.`created` AS `CREATED`,`personas`.`modified` AS `MODIFIED` from `personas`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_persona_tipo_documentos` AS (select `v_global_datos`.`ID` AS `ID`,`v_global_datos`.`CONCEPTO_1` AS `CONCEPTO_1`,`v_global_datos`.`CONCEPTO_2` AS `CONCEPTO_2`,`v_global_datos`.`CONCEPTO_3` AS `CONCEPTO_3`,`v_global_datos`.`LOGICO_1` AS `LOGICO_1`,`v_global_datos`.`LOGICO_2` AS `LOGICO_2`,`v_global_datos`.`ENTERO_1` AS `ENTERO_1`,`v_global_datos`.`ENTERO_2` AS `ENTERO_2`,`v_global_datos`.`DECIMAL_1` AS `DECIMAL_1`,`v_global_datos`.`DECIMAL_2` AS `DECIMAL_2`,`v_global_datos`.`FECHA_1` AS `FECHA_1`,`v_global_datos`.`FECHA_2` AS `FECHA_2`,`v_global_datos`.`TEXTO_1` AS `TEXTO_1`,`v_global_datos`.`TEXTO_2` AS `TEXTO_2` from `v_global_datos` where ((`v_global_datos`.`ID` like 'PERSTPDC%') and (`v_global_datos`.`ID` <> 'PERSTPDC')));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_plan_montos` AS (select `proveedor_plan_grilla_cuotas`.`id` AS `ID`,`proveedor_planes`.`id` AS `PLAN_ID`,`proveedor_plan_grillas`.`vigencia_desde` AS `VIGENCIA`,`proveedor_plan_grilla_cuotas`.`liquido` AS `LIQUIDO` from ((`proveedor_planes` join `proveedor_plan_grillas`) join `proveedor_plan_grilla_cuotas`) where ((`proveedor_planes`.`id` = `proveedor_plan_grillas`.`proveedor_plan_id`) and (`proveedor_plan_grilla_cuotas`.`liquido` <= `FX_PROVEEDOR_PRESTAMO_SALDO_DISPONIBLE`(`proveedor_planes`.`proveedor_id`)) and (`proveedor_plan_grillas`.`id` = (select `grillas`.`id` from `proveedor_plan_grillas` `grillas` where ((`grillas`.`proveedor_plan_id` = `proveedor_planes`.`id`) and (`grillas`.`vigencia_desde` <= curdate())) order by `grillas`.`vigencia_desde` desc limit 1)) and (`proveedor_plan_grilla_cuotas`.`proveedor_plan_grilla_id` = `proveedor_plan_grillas`.`id`)) group by `proveedor_planes`.`id`,`proveedor_plan_grillas`.`vigencia_desde`,`proveedor_plan_grilla_cuotas`.`liquido` order by `proveedor_planes`.`id`,`proveedor_plan_grilla_cuotas`.`liquido`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_plan_monto_cuotas` AS (select `proveedor_plan_grilla_cuotas`.`id` AS `ID`,`proveedor_planes`.`id` AS `PLAN_ID`,`proveedor_plan_grillas`.`vigencia_desde` AS `VIGENCIA`,`proveedor_plan_grilla_cuotas`.`capital` AS `CAPITAL`,`proveedor_plan_grilla_cuotas`.`liquido` AS `LIQUIDO`,`proveedor_plan_grilla_cuotas`.`cuotas` AS `CUOTAS`,`proveedor_plan_grilla_cuotas`.`importe` AS `IMPORTE`,(`proveedor_plan_grilla_cuotas`.`importe` * `proveedor_plan_grilla_cuotas`.`cuotas`) AS `TOTAL` from ((`proveedor_planes` join `proveedor_plan_grillas`) join `proveedor_plan_grilla_cuotas`) where ((`proveedor_planes`.`id` = `proveedor_plan_grillas`.`proveedor_plan_id`) and (`proveedor_plan_grillas`.`id` = (select `grillas`.`id` from `proveedor_plan_grillas` `grillas` where ((`grillas`.`proveedor_plan_id` = `proveedor_planes`.`id`) and (`grillas`.`vigencia_desde` <= curdate())) order by `grillas`.`vigencia_desde` desc limit 1)) and (`proveedor_plan_grilla_cuotas`.`proveedor_plan_grilla_id` = `proveedor_plan_grillas`.`id`)) group by `proveedor_planes`.`id`,`proveedor_plan_grillas`.`vigencia_desde`,`proveedor_plan_grilla_cuotas`.`liquido`,`proveedor_plan_grilla_cuotas`.`cuotas` order by `proveedor_planes`.`id`,`proveedor_plan_grilla_cuotas`.`liquido`,`proveedor_plan_grilla_cuotas`.`cuotas`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_planes` AS (select `pp`.`id` AS `ID`,`pp`.`proveedor_id` AS `PROVEEDOR_ID`,`p`.`razon_social` AS `PROVEEDOR`,`pp`.`descripcion` AS `DESCRIPCION_PLAN`,concat(`p`.`razon_social_resumida`,' ** ',`pp`.`descripcion`,' **') AS `DESCRIPCION`,`pp`.`activo` AS `ACTIVO`,`p`.`reasignable` AS `REASIGNABLE`,`p`.`vendedores` AS `VENDEDORES`,ifnull((select min(`v_plan_montos`.`LIQUIDO`) from `v_plan_montos` where (`v_plan_montos`.`PLAN_ID` = `pp`.`id`)),0) AS `MONTO_MINIMO`,ifnull((select max(`v_plan_montos`.`LIQUIDO`) from `v_plan_montos` where (`v_plan_montos`.`PLAN_ID` = `pp`.`id`)),0) AS `MONTO_MAXIMO`,ifnull((select min(`v_plan_monto_cuotas`.`CUOTAS`) from `v_plan_monto_cuotas` where (`v_plan_monto_cuotas`.`PLAN_ID` = `pp`.`id`)),0) AS `CUOTAS_MINIMO`,ifnull((select max(`v_plan_monto_cuotas`.`CUOTAS`) from `v_plan_monto_cuotas` where (`v_plan_monto_cuotas`.`PLAN_ID` = `pp`.`id`)),0) AS `CUOTAS_MAXIMO`,(select min(`v_plan_monto_cuotas`.`IMPORTE`) from `v_plan_monto_cuotas` where ((`v_plan_monto_cuotas`.`PLAN_ID` = `pp`.`id`) and (`v_plan_monto_cuotas`.`CUOTAS` = (select min(`v_plan_monto_cuotas`.`CUOTAS`) from `v_plan_monto_cuotas` where (`v_plan_monto_cuotas`.`PLAN_ID` = `pp`.`id`))))) AS `CUOTA_MONTO_MINIMO`,(select max(`v_plan_monto_cuotas`.`IMPORTE`) from `v_plan_monto_cuotas` where ((`v_plan_monto_cuotas`.`PLAN_ID` = `pp`.`id`) and (`v_plan_monto_cuotas`.`CUOTAS` = (select max(`v_plan_monto_cuotas`.`CUOTAS`) from `v_plan_monto_cuotas` where (`v_plan_monto_cuotas`.`PLAN_ID` = `pp`.`id`))))) AS `CUOTA_MONTO_MAXIMO` from (`proveedor_planes` `pp` join `proveedores` `p`) where (`pp`.`proveedor_id` = `p`.`id`));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_plan_organismos` AS (select `proveedor_plan_organismos`.`proveedor_plan_id` AS `PLAN_ID`,`proveedor_plan_organismos`.`codigo_organismo` AS `CODIGO_ORGANISMO` from `proveedor_plan_organismos`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_plan_condiciones` AS (select `ppgc`.`id` AS `ID`,`pp`.`ID` AS `PLAN_ID`,`ppg`.`vigencia_desde` AS `VIGENCIA`,`ppgc`.`capital` AS `CAPITAL`,`ppgc`.`liquido` AS `LIQUIDO`,`ppgc`.`cuotas` AS `CUOTAS`,`ppgc`.`importe` AS `IMPORTE`,(`ppgc`.`importe` * `ppgc`.`cuotas`) AS `TOTAL` from ((`v_planes` `pp` join `proveedor_plan_grillas` `ppg`) join `proveedor_plan_grilla_cuotas` `ppgc`) where ((`pp`.`ID` = `ppg`.`proveedor_plan_id`) and (`ppg`.`id` = `ppgc`.`proveedor_plan_grilla_id`) and (`ppg`.`vigencia_desde` < now()) and (`ppgc`.`liquido` <= `FX_PROVEEDOR_PRESTAMO_SALDO_DISPONIBLE`(`pp`.`PROVEEDOR_ID`))));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_productos` AS (select `v_global_datos`.`ID` AS `ID`,`v_global_datos`.`CONCEPTO_1` AS `CONCEPTO_1`,`v_global_datos`.`CONCEPTO_2` AS `CONCEPTO_2`,`v_global_datos`.`CONCEPTO_3` AS `CONCEPTO_3`,`v_global_datos`.`LOGICO_1` AS `LOGICO_1`,`v_global_datos`.`LOGICO_2` AS `LOGICO_2`,`v_global_datos`.`ENTERO_1` AS `ENTERO_1`,`v_global_datos`.`ENTERO_2` AS `ENTERO_2`,`v_global_datos`.`DECIMAL_1` AS `DECIMAL_1`,`v_global_datos`.`DECIMAL_2` AS `DECIMAL_2`,`v_global_datos`.`FECHA_1` AS `FECHA_1`,`v_global_datos`.`FECHA_2` AS `FECHA_2`,`v_global_datos`.`TEXTO_1` AS `TEXTO_1`,`v_global_datos`.`TEXTO_2` AS `TEXTO_2` from `v_global_datos` where ((`v_global_datos`.`ID` like 'MUTUPROD%') and (`v_global_datos`.`ID` <> 'MUTUPROD')) order by `v_global_datos`.`ENTERO_1`,`v_global_datos`.`CONCEPTO_1`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_proveedores` AS select `proveedores`.`id` AS `ID`,`proveedores`.`cuit` AS `CUIT`,`proveedores`.`razon_social` AS `RAZON_SOCIAL`,`proveedores`.`razon_social_resumida` AS `RAZON_SOCIAL_RESUMIDA`,`proveedores`.`activo` AS `ACTIVO`,`proveedores`.`calle` AS `CALLE`,`proveedores`.`numero_calle` AS `NUMERO_CALLE`,`proveedores`.`piso` AS `PISO`,`proveedores`.`dpto` AS `DPTO`,`proveedores`.`barrio` AS `BARRIO`,`proveedores`.`localidad` AS `LOCALIDAD`,`proveedores`.`codigo_postal` AS `CODIGO_POSTAL`,`proveedores`.`telefono_fijo` AS `TELEFONO_FIJO`,`proveedores`.`telefono_movil` AS `TELEFONO_MOVIL`,`proveedores`.`fax` AS `FAX`,`proveedores`.`email` AS `EMAIL`,`proveedores`.`codigo_acceso_ws` AS `CODIGO_ACCESO_WS` from `proveedores`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_provincias` AS (select `provincias`.`id` AS `ID`,`provincias`.`nombre` AS `NOMBRE`,`provincias`.`letra` AS `LETRA` from `provincias`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_usuario_grupos_activos` AS select `u`.`usuario` AS `usuario`,`u`.`password` AS `password`,`g`.`id` AS `id` from (`usuarios` `u` join `grupos` `g` on((`g`.`id` = `u`.`grupo_id`))) where ((`g`.`activo` = 1) and (`u`.`activo` = 1));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_usuarios` AS (select `usuarios`.`id` AS `ID`,`usuarios`.`grupo_id` AS `GRUPO_ID`,`usuarios`.`usuario` AS `USUARIO`,`usuarios`.`password` AS `PASSWORD`,`usuarios`.`activo` AS `ACTIVO`,`usuarios`.`descripcion` AS `DESCRIPCION`,`usuarios`.`vendedor_id` AS `VENDEDOR_ID` from `usuarios`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_usuarios_grupos_realm` AS select `v_usuarios`.`ID` AS `ID`,`v_usuarios`.`GRUPO_ID` AS `GRUPO_ID`,`v_usuarios`.`USUARIO` AS `USUARIO`,`v_usuarios`.`PASSWORD` AS `PASSWORD`,`v_usuarios`.`ACTIVO` AS `ACTIVO`,`v_usuarios`.`DESCRIPCION` AS `DESCRIPCION`,`v_usuarios`.`VENDEDOR_ID` AS `VENDEDOR_ID`,substr(`v_grupos`.`NOMBRE`,1,5) AS `ROL` from (`v_usuarios` join `v_grupos` on((`v_grupos`.`ID` = `v_usuarios`.`GRUPO_ID`)));

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_vendedores` AS (select `vendedores`.`id` AS `ID`,`vendedores`.`persona_id` AS `PERSONA_ID`,`vendedores`.`usuario_id` AS `USUARIO_ID`,`vendedores`.`activo` AS `ACTIVO`,(select count(1) from `v_credito_solicitudes` where ((`vendedores`.`id` = `v_credito_solicitudes`.`VENDEDOR_ID`) and (`v_credito_solicitudes`.`VENDEDOR_NOTIFICAR` = 1))) AS `NOTIFICACIONES` from `vendedores`);

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_vendedor_remitos` AS (select `vendedor_remitos`.`id` AS `ID`,`vendedor_remitos`.`vendedor_id` AS `VENDEDOR_ID`,`vendedor_remitos`.`observaciones` AS `OBSERVACIONES`,`vendedor_remitos`.`user_created` AS `USER_CREATED`,`vendedor_remitos`.`created` AS `CREATED`,`vendedor_remitos`.`anulado` AS `ANULADO` from `vendedor_remitos`);

